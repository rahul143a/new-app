"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.extractPieceFromModule = exports.getPackageVersionForPiece = exports.getPackageAliasForPiece = void 0;
const activepieces_error_1 = require("../common/activepieces-error");
const getPackageAliasForPiece = (params) => {
    const { pieceName, pieceVersion } = params;
    return `${pieceName}-${pieceVersion}`;
};
exports.getPackageAliasForPiece = getPackageAliasForPiece;
const getPackageVersionForPiece = (params) => {
    const { pieceName, pieceVersion } = params;
    return `npm:${pieceName}@${pieceVersion}`;
};
exports.getPackageVersionForPiece = getPackageVersionForPiece;
const extractPieceFromModule = (params) => {
    const { module, pieceName, pieceVersion } = params;
    const exports = Object.values(module);
    for (const e of exports) {
        if (e !== null && e !== undefined && e.constructor.name === 'Piece') {
            return e;
        }
    }
    throw new activepieces_error_1.ActivepiecesError({
        code: activepieces_error_1.ErrorCode.PIECE_NOT_FOUND,
        params: {
            pieceName,
            pieceVersion,
        }
    });
};
exports.extractPieceFromModule = extractPieceFromModule;
//# sourceMappingURL=utils.js.map